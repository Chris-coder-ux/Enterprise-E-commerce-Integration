---
description: "Buenas pr√°cticas de programaci√≥n aplicadas en todo el c√≥digo del proyecto"
globs: ["**/*.js", "**/*.ts", "**/*.jsx", "**/*.tsx", "**/*.php", "**/*.py"]
alwaysApply: true
---

# üìã Buenas Pr√°cticas de Programaci√≥n

## SOLID Principles

### SRP - Single Responsibility
Cada clase/m√≥dulo debe tener una sola responsabilidad.  
**Good ‚úÖ**  
```ts
class UserRepository {
  getUserById(id: number) { /* ... */ }
}

class UserService {
  constructor(private repo: UserRepository) {}
  getUserProfile(id: number) { /* ... */ }
}
```
**Bad ‚ùå**  
```ts
class UserManager {
  getUserById(id: number) { /* ... */ }
  renderUserProfile(id: number) { /* ... */ } // L√≥gica de presentaci√≥n mezclada
}
```

---

### OCP - Open/Closed
Abierto a extensi√≥n, cerrado a modificaci√≥n.  
**Good ‚úÖ**  
```ts
interface Shape {
  area(): number;
}

class Circle implements Shape {
  constructor(private r: number) {}
  area() { return Math.PI * this.r * this.r; }
}

class Square implements Shape {
  constructor(private s: number) {}
  area() { return this.s * this.s; }
}
```
**Bad ‚ùå**  
```ts
function area(shape: any) {
  if (shape.type === 'circle') return Math.PI * shape.r * shape.r;
  if (shape.type === 'square') return shape.s * shape.s;
  // Cada vez que agrego una figura debo modificar esta funci√≥n
}
```

---

### LSP - Liskov Substitution
Las subclases deben poder reemplazar a la clase base.  
**Good ‚úÖ**  
```ts
class Bird {
  fly() { /* ... */ }
}

class Sparrow extends Bird {}
```
**Bad ‚ùå**  
```ts
class Bird {
  fly() { /* ... */ }
}

class Penguin extends Bird {
  fly() { throw new Error("Penguins can't fly"); } // Rompe el contrato
}
```

---

### ISP - Interface Segregation
Preferir varias interfaces espec√≠ficas en lugar de una general.  
**Good ‚úÖ**  
```ts
interface Printer {
  print(): void;
}

interface Scanner {
  scan(): void;
}
```
**Bad ‚ùå**  
```ts
interface Machine {
  print(): void;
  scan(): void;
  fax(): void;
}

class SimplePrinter implements Machine {
  print() { /* ... */ }
  scan() { throw new Error("Not supported"); }
  fax() { throw new Error("Not supported"); }
}
```

---

### DIP - Dependency Inversion
Depender de abstracciones, no de implementaciones.  
**Good ‚úÖ**  
```ts
interface Notifier {
  send(message: string): void;
}

class EmailNotifier implements Notifier {
  send(message: string) { /* ... */ }
}

class UserService {
  constructor(private notifier: Notifier) {}
  registerUser(user: string) {
    this.notifier.send("User registered");
  }
}
```
**Bad ‚ùå**  
```ts
class UserService {
  private notifier = new EmailNotifier(); // Acoplamiento directo
}
```

---

## DRY (Don't Repeat Yourself)
**Good ‚úÖ**  
```ts
function calculateDiscount(price: number): number {
  return price * 0.9;
}
```
**Bad ‚ùå**  
```ts
const discountedPrice1 = price1 * 0.9;
const discountedPrice2 = price2 * 0.9;
```

---

## KISS (Keep It Simple, Stupid)
**Good ‚úÖ**  
```ts
function isEven(n: number): boolean {
  return n % 2 === 0;
}
```
**Bad ‚ùå**  
```ts
function isEven(n: number): boolean {
  return Math.abs(Math.sin(n * Math.PI / 2)) < 0.00001;
}
```

---

## Separation of Concerns
**Good ‚úÖ**  
```ts
// Archivo db.ts
export function getUserById(id: number) { /* ... */ }

// Archivo userController.ts
import { getUserById } from './db';
export function showUser(id: number) { /* ... */ }
```
**Bad ‚ùå**  
```ts
function showUser(id: number) {
  // L√≥gica de base de datos y l√≥gica de UI en la misma funci√≥n
}
```

---

## Configuration over Convention
**Good ‚úÖ**  
```ts
const dbHost = process.env.DB_HOST || "localhost";
```
**Bad ‚ùå**  
```ts
const dbHost = "localhost"; // Hardcodeado
```

---

## Fail Fast
**Good ‚úÖ**  
```ts
function divide(a: number, b: number) {
  if (b === 0) throw new Error("Division by zero");
  return a / b;
}
```
**Bad ‚ùå**  
```ts
function divide(a: number, b: number) {
  return a / b; // Error oculto si b = 0
}
```

---

## Graceful Degradation
**Good ‚úÖ**  
```ts
try {
  loadHighResImage();
} catch {
  loadLowResImage(); // Fallback
}
```
**Bad ‚ùå**  
```ts
loadHighResImage(); // Si falla, todo rompe
```

---

## Resource Management
**Good ‚úÖ**  
```ts
const file = fs.openSync("data.txt", "r");
try {
  // Usar el archivo
} finally {
  fs.closeSync(file);
}
```
**Bad ‚ùå**  
```ts
const file = fs.openSync("data.txt", "r");
// Nunca se cierra el archivo
```

---

## Error Handling
**Good ‚úÖ**  
```ts
try {
  processPayment();
} catch (err) {
  logger.error("Payment failed", err);
}
```
**Bad ‚ùå**  
```ts
processPayment(); // Sin manejo de errores
```

---

## Performance Optimization
**Good ‚úÖ**  
```ts
const data = new Set([1,2,3,4]);
data.has(3); // O(1)
```
**Bad ‚ùå**  
```ts
const data = [1,2,3,4];
data.includes(3); // O(n) innecesario si el dataset es grande
```

---

## Type Safety
**Good ‚úÖ**  
```ts
function add(a: number, b: number): number {
  return a + b;
}
```
**Bad ‚ùå**  
```ts
function add(a, b) {
  return a + b; // Puede concatenar strings sin querer
}
```

---

## Documentation
**Good ‚úÖ**  
```ts
// Calcula el precio total incluyendo impuestos
function calculateTotal(price: number, tax: number): number {
  return price + (price * tax);
}
```
**Bad ‚ùå**  
```ts
// Funci√≥n
function calculateTotal(price, tax) {
  return price + (price * tax);
}
```

---

## Testing
**Good ‚úÖ**  
```ts
test("calculateTotal con impuesto", () => {
  expect(calculateTotal(100, 0.2)).toBe(120);
});
```
**Bad ‚ùå**  
```ts
// Sin pruebas
```

---

## Security
**Good ‚úÖ**  
```ts
const userInput = sanitize(input);
db.query("SELECT * FROM users WHERE name = ?", [userInput]);
```
**Bad ‚ùå**  
```ts
db.query("SELECT * FROM users WHERE name = '" + input + "'"); // SQL Injection
```

---

## Monitoring
**Good ‚úÖ**  
```ts
logger.info("Service started");
metrics.increment("requests_total");
```
**Bad ‚ùå**  
```ts
console.log("Service started"); // Sin m√©tricas ni observabilidad real
```