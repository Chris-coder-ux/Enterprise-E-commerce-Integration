<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>controllers/UnifiedDashboardController.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AjaxManager.html">AjaxManager</a><ul class='methods'><li data-type='method'><a href="AjaxManager.html#.call">call</a></li></ul></li><li><a href="ErrorHandler.html">ErrorHandler</a><ul class='methods'><li data-type='method'><a href="ErrorHandler.html#.logError">logError</a></li><li data-type='method'><a href="ErrorHandler.html#.showCancelError">showCancelError</a></li><li data-type='method'><a href="ErrorHandler.html#.showConnectionError">showConnectionError</a></li><li data-type='method'><a href="ErrorHandler.html#.showCriticalError">showCriticalError</a></li><li data-type='method'><a href="ErrorHandler.html#.showProtectionError">showProtectionError</a></li><li data-type='method'><a href="ErrorHandler.html#.showUIError">showUIError</a></li></ul></li><li><a href="EventCleanupManager.html">EventCleanupManager</a><ul class='methods'><li data-type='method'><a href="EventCleanupManager.html#cleanupAll">cleanupAll</a></li><li data-type='method'><a href="EventCleanupManager.html#getStats">getStats</a></li><li data-type='method'><a href="EventCleanupManager.html#.cleanupComponent">cleanupComponent</a></li><li data-type='method'><a href="EventCleanupManager.html#.getInstance">getInstance</a></li><li data-type='method'><a href="EventCleanupManager.html#.registerCustomEventListener">registerCustomEventListener</a></li><li data-type='method'><a href="EventCleanupManager.html#.registerDocumentListener">registerDocumentListener</a></li><li data-type='method'><a href="EventCleanupManager.html#.registerElementListener">registerElementListener</a></li><li data-type='method'><a href="EventCleanupManager.html#.registerNativeListener">registerNativeListener</a></li></ul></li><li></li><li></li><li><a href="PollingManager.html">PollingManager</a><ul class='methods'><li data-type='method'><a href="PollingManager.html#adjustPolling">adjustPolling</a></li><li data-type='method'><a href="PollingManager.html#emit">emit</a></li><li data-type='method'><a href="PollingManager.html#getIntervalId">getIntervalId</a></li><li data-type='method'><a href="PollingManager.html#isPollingActive">isPollingActive</a></li><li data-type='method'><a href="PollingManager.html#off">off</a></li><li data-type='method'><a href="PollingManager.html#on">on</a></li><li data-type='method'><a href="PollingManager.html#recordError">recordError</a></li><li data-type='method'><a href="PollingManager.html#recordResponseTime">recordResponseTime</a></li><li data-type='method'><a href="PollingManager.html#reset">reset</a></li><li data-type='method'><a href="PollingManager.html#startPolling">startPolling</a></li><li data-type='method'><a href="PollingManager.html#stopAllPolling">stopAllPolling</a></li><li data-type='method'><a href="PollingManager.html#stopPolling">stopPolling</a></li></ul></li><li></li><li></li><li><a href="SyncDashboard.html">SyncDashboard</a><ul class='methods'><li data-type='method'><a href="SyncDashboard.html#cancelPhase1">cancelPhase1</a></li><li data-type='method'><a href="SyncDashboard.html#cancelSync">cancelSync</a></li><li data-type='method'><a href="SyncDashboard.html#disableButton">disableButton</a></li><li data-type='method'><a href="SyncDashboard.html#enableButton">enableButton</a></li><li data-type='method'><a href="SyncDashboard.html#handlePhase1Response">handlePhase1Response</a></li><li data-type='method'><a href="SyncDashboard.html#loadCurrentStatus">loadCurrentStatus</a></li><li data-type='method'><a href="SyncDashboard.html#pausePhase2">pausePhase2</a></li><li data-type='method'><a href="SyncDashboard.html#resumePhase1">resumePhase1</a></li><li data-type='method'><a href="SyncDashboard.html#startPhase1">startPhase1</a></li><li data-type='method'><a href="SyncDashboard.html#startPhase2">startPhase2</a></li><li data-type='method'><a href="SyncDashboard.html#startTimer">startTimer</a></li><li data-type='method'><a href="SyncDashboard.html#stopTimer">stopTimer</a></li><li data-type='method'><a href="SyncDashboard.html#updateConfig">updateConfig</a></li><li data-type='method'><a href="SyncDashboard.html#updateDashboardFromStatus">updateDashboardFromStatus</a></li><li data-type='method'><a href="SyncDashboard.html#updatePhase1Progress">updatePhase1Progress</a></li><li data-type='method'><a href="SyncDashboard.html#updatePhase2Progress">updatePhase2Progress</a></li><li data-type='method'><a href="SyncDashboard.html#updatePhaseStatus">updatePhaseStatus</a></li></ul></li><li></li><li></li><li><a href="UIOptimizer.html">UIOptimizer</a><ul class='methods'><li data-type='method'><a href="UIOptimizer.html#cancelPendingUpdates">cancelPendingUpdates</a></li><li data-type='method'><a href="UIOptimizer.html#clearCache">clearCache</a></li><li data-type='method'><a href="UIOptimizer.html#scheduleUpdate">scheduleUpdate</a></li><li data-type='method'><a href="UIOptimizer.html#.getInstance">getInstance</a></li><li data-type='method'><a href="UIOptimizer.html#.updateCssIfChanged">updateCssIfChanged</a></li><li data-type='method'><a href="UIOptimizer.html#.updateDataIfChanged">updateDataIfChanged</a></li><li data-type='method'><a href="UIOptimizer.html#.updateHtmlIfChanged">updateHtmlIfChanged</a></li><li data-type='method'><a href="UIOptimizer.html#.updateTextIfChanged">updateTextIfChanged</a></li><li data-type='method'><a href="UIOptimizer.html#.updateValueIfChanged">updateValueIfChanged</a></li></ul></li><li></li><li></li></ul><h3>Modules</h3><ul><li><a href="module-ui_SidebarController.html">ui/SidebarController</a></li><li><a href="module-utils_FormatUtils.html">utils/FormatUtils</a></li></ul><h3>Namespaces</h3><ul><li></li><li><a href="CardManager.html">CardManager</a></li><li></li><li><a href="ConsoleManager.html">ConsoleManager</a></li><li><a href="DASHBOARD_CONFIG.html">DASHBOARD_CONFIG</a></li><li></li><li><a href="global.html#DomUtils">DomUtils</a></li><li></li><li><a href="MESSAGES.html">MESSAGES</a></li><li><a href="global.html#NonceManager">NonceManager</a></li><li><a href="global.html#Phase1Manager">Phase1Manager</a></li><li><a href="global.html#Phase2Manager">Phase2Manager</a></li><li><a href="global.html#ProgressBar">ProgressBar</a></li><li><a href="ResponsiveLayout.html">ResponsiveLayout</a></li><li></li><li><a href="SELECTORS.html">SELECTORS</a></li><li></li><li><a href="global.html#Sanitizer">Sanitizer</a><ul class='methods'><li data-type='method'><a href="global.html#Sanitizer#.escapeHtml">escapeHtml</a></li><li data-type='method'><a href="global.html#Sanitizer#.sanitizeHtml">sanitizeHtml</a></li><li data-type='method'><a href="global.html#Sanitizer#.sanitizeMessage">sanitizeMessage</a></li></ul></li><li><a href="global.html#SyncController">SyncController</a></li><li><a href="global.html#SyncProgress">SyncProgress</a></li><li><a href="global.html#SyncStateManager">SyncStateManager</a></li><li><a href="global.html#SystemEventManager">SystemEventManager</a><ul class='methods'><li data-type='method'><a href="global.html#SystemEventManager#.checkAllSystemsReady">checkAllSystemsReady</a></li><li data-type='method'><a href="global.html#SystemEventManager#.checkDependencies">checkDependencies</a></li><li data-type='method'><a href="global.html#SystemEventManager#.emitErrorHandlerReady">emitErrorHandlerReady</a></li><li data-type='method'><a href="global.html#SystemEventManager#.emitSystemBaseReady">emitSystemBaseReady</a></li><li data-type='method'><a href="global.html#SystemEventManager#.emitUnifiedDashboardReady">emitUnifiedDashboardReady</a></li><li data-type='method'><a href="global.html#SystemEventManager#.getInitializationState">getInitializationState</a></li><li data-type='method'><a href="global.html#SystemEventManager#.init">init</a></li><li data-type='method'><a href="global.html#SystemEventManager#.initializeSystem">initializeSystem</a></li><li data-type='method'><a href="global.html#SystemEventManager#.log">log</a></li><li data-type='method'><a href="global.html#SystemEventManager#.registerSystem">registerSystem</a></li></ul></li><li><a href="global.html#ToastManager">ToastManager</a></li><li><a href="UnifiedDashboard.html">UnifiedDashboard</a><ul class='methods'><li data-type='method'><a href="UnifiedDashboard.html#.init">init</a></li><li data-type='method'><a href="UnifiedDashboard.html#.toggleDebugMode">toggleDebugMode</a></li></ul></li><li></li><li><a href="UnifiedDashboardController.html">UnifiedDashboardController</a></li><li></li></ul><h3>Global</h3><ul><li><a href="global.html#DEFAULT_DURATION">DEFAULT_DURATION</a></li><li><a href="global.html#DEFAULT_RENEWAL_INTERVAL">DEFAULT_RENEWAL_INTERVAL</a></li><li><a href="global.html#DEFAULT_SELECTOR">DEFAULT_SELECTOR</a></li><li><a href="global.html#DOM_CACHE">DOM_CACHE</a></li><li><a href="global.html#TOAST_CLASSES">TOAST_CLASSES</a></li><li><a href="global.html#TOAST_COLORS">TOAST_COLORS</a></li><li><a href="global.html#TOAST_ICONS">TOAST_ICONS</a></li><li><a href="global.html#adjustLayout">adjustLayout</a></li><li><a href="global.html#attemptRenewal">attemptRenewal</a></li><li><a href="global.html#check">check</a></li><li><a href="global.html#cleanupOnPageLoad">cleanupOnPageLoad</a></li><li><a href="global.html#cleanupSyncProgressListeners">cleanupSyncProgressListeners</a></li><li><a href="global.html#clearPhase2PollingInterval">clearPhase2PollingInterval</a></li><li><a href="global.html#clearSyncInterval">clearSyncInterval</a></li><li><a href="global.html#error">error</a></li><li><a href="global.html#getCache">getCache</a></li><li><a href="global.html#getFadeInDuration">getFadeInDuration</a></li><li><a href="global.html#getInactiveProgressCounter">getInactiveProgressCounter</a></li><li><a href="global.html#getLastProgressValue">getLastProgressValue</a></li><li><a href="global.html#getPhase1Initialized">getPhase1Initialized</a></li><li><a href="global.html#getPhase1Starting">getPhase1Starting</a></li><li><a href="global.html#getPhase2Initialized">getPhase2Initialized</a></li><li><a href="global.html#getPhase2PollingInterval">getPhase2PollingInterval</a></li><li><a href="global.html#getPhase2ProcessingBatch">getPhase2ProcessingBatch</a></li><li><a href="global.html#getPhase2Starting">getPhase2Starting</a></li><li><a href="global.html#getPollingInterval">getPollingInterval</a></li><li><a href="global.html#getState">getState</a></li><li><a href="global.html#getSyncInterval">getSyncInterval</a></li><li><a href="global.html#getTrackingState">getTrackingState</a></li><li><a href="global.html#getWidth">getWidth</a></li><li><a href="global.html#hideSidebar">hideSidebar</a></li><li><a href="global.html#inactiveProgressCounter">inactiveProgressCounter</a></li><li><a href="global.html#incrementInactiveProgressCounter">incrementInactiveProgressCounter</a></li><li><a href="global.html#info">info</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#initCache">initCache</a></li><li><a href="global.html#initResponsiveMenu">initResponsiveMenu</a></li><li><a href="global.html#initialize">initialize</a></li><li><a href="global.html#initializeSyncDashboard">initializeSyncDashboard</a></li><li><a href="global.html#isAutoRenewalActive">isAutoRenewalActive</a></li><li><a href="global.html#isAvailable">isAvailable</a></li><li><a href="global.html#isCacheInitialized">isCacheInitialized</a></li><li><a href="global.html#isComplete">isComplete</a></li><li><a href="global.html#isPollingActive">isPollingActive</a></li><li><a href="global.html#phase1Starting">phase1Starting</a></li><li><a href="global.html#phase2Starting">phase2Starting</a></li><li><a href="global.html#pollingManager">pollingManager</a></li><li><a href="global.html#proceedWithSync">proceedWithSync</a></li><li><a href="global.html#processNextBatchAutomatically">processNextBatchAutomatically</a></li><li><a href="global.html#refreshCache">refreshCache</a></li><li><a href="global.html#reinit">reinit</a></li><li><a href="global.html#renewalIntervalId">renewalIntervalId</a></li><li><a href="global.html#reset">reset</a></li><li><a href="global.html#resetAllState">resetAllState</a></li><li><a href="global.html#resetCounters">resetCounters</a></li><li><a href="global.html#resetPhase1State">resetPhase1State</a></li><li><a href="global.html#resetPhase2State">resetPhase2State</a></li><li><a href="global.html#setColor">setColor</a></li><li><a href="global.html#setInactiveProgressCounter">setInactiveProgressCounter</a></li><li><a href="global.html#setLastProgressValue">setLastProgressValue</a></li><li><a href="global.html#setPercentage">setPercentage</a></li><li><a href="global.html#setPhase1Initialized">setPhase1Initialized</a></li><li><a href="global.html#setPhase1Starting">setPhase1Starting</a></li><li><a href="global.html#setPhase2Initialized">setPhase2Initialized</a></li><li><a href="global.html#setPhase2PollingInterval">setPhase2PollingInterval</a></li><li><a href="global.html#setPhase2ProcessingBatch">setPhase2ProcessingBatch</a></li><li><a href="global.html#setPhase2Starting">setPhase2Starting</a></li><li><a href="global.html#setSyncInterval">setSyncInterval</a></li><li><a href="global.html#setWidth">setWidth</a></li><li><a href="global.html#setupAutoRenewal">setupAutoRenewal</a></li><li><a href="global.html#show">show</a></li><li><a href="global.html#showSidebar">showSidebar</a></li><li><a href="global.html#start">start</a></li><li><a href="global.html#stop">stop</a></li><li><a href="global.html#stopAutoRenewal">stopAutoRenewal</a></li><li><a href="global.html#stopProgressPolling">stopProgressPolling</a></li><li><a href="global.html#success">success</a></li><li><a href="global.html#toggleSidebar">toggleSidebar</a></li><li><a href="global.html#trackingState">trackingState</a></li><li><a href="global.html#updateCardData">updateCardData</a></li><li><a href="global.html#updateSpecificCard">updateSpecificCard</a></li><li><a href="global.html#warning">warning</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">controllers/UnifiedDashboardController.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Controlador Principal del Dashboard
 *
 * Coordina la inicializaciÃ³n y gestiÃ³n de todos los sistemas del dashboard,
 * incluyendo UnifiedDashboard, SyncDashboard, SystemEventManager, ResponsiveLayout,
 * y otros componentes del sistema.
 *
 * @module controllers/UnifiedDashboardController
 * @namespace UnifiedDashboardController
 * @since 1.0.0
 * @author Christian
 */

/* global jQuery, window, ErrorHandler, AjaxManager, pollingManager, UnifiedDashboard, SyncDashboard, SystemEventManager, ResponsiveLayout */

/**
 * Controlador principal que coordina todos los sistemas del dashboard
 *
 * @class UnifiedDashboardController
 * @namespace UnifiedDashboardController
 * @description Controlador principal que coordina todos los sistemas del dashboard
 *
 * @example
 * // Inicializar el controlador (se ejecuta automÃ¡ticamente)
 * UnifiedDashboardController.init();
 *
 * // Toggle del sidebar
 * UnifiedDashboardController.toggleSidebar();
 *
 * @since 1.0.0
 * @author Christian
 */
const UnifiedDashboardController = {
  // Variables de estado
  isSidebarVisible: true,
  lastSyncedData: null,
  initialized: false,
  systems: {
    unifiedDashboard: false,
    syncDashboard: false,
    systemEventManager: false,
    responsiveLayout: false,
    pollingManager: false,
    errorHandler: false,
    ajaxManager: false
  },

  /**
   * Inicializar el controlador principal
   * @function init
   * @returns {void}
   * @description Coordina la inicializaciÃ³n de todos los sistemas del dashboard
   */
  init() {
    if (this.initialized) {
      // eslint-disable-next-line no-console
      console.warn('UnifiedDashboardController ya estÃ¡ inicializado');
      return;
    }

    // eslint-disable-next-line no-console
    console.log('ðŸŽ¯ Inicializando UnifiedDashboardController...');

    // 1. Inicializar sistemas base (orden crÃ­tico)
    this.initBaseSystems();

    // 2. Inicializar eventos del sidebar
    this.initSidebar();

    // 3. Inicializar eventos de la vista global
    this.initGlobalView();

    // 4. Inicializar sistemas de alto nivel
    this.initHighLevelSystems();

    // 5. Cargar datos iniciales
    this.loadData();

    this.initialized = true;
    // eslint-disable-next-line no-console
    console.log('âœ… UnifiedDashboardController inicializado correctamente');
  },

  /**
   * Inicializar sistemas base (ErrorHandler, AjaxManager, PollingManager)
   * @function initBaseSystems
   * @returns {void}
   * @private
   */
  initBaseSystems() {
    // eslint-disable-next-line no-console
    console.log('ðŸ”§ Inicializando sistemas base...');

    // ErrorHandler ya estÃ¡ disponible globalmente
    if (typeof ErrorHandler !== 'undefined') {
      this.systems.errorHandler = true;
      // eslint-disable-next-line no-console
      console.log('  âœ… ErrorHandler disponible');
    }

    // AjaxManager ya estÃ¡ disponible globalmente
    // eslint-disable-next-line no-restricted-globals
    if (typeof window !== 'undefined' &amp;&amp; typeof window.AjaxManager !== 'undefined') {
      this.systems.ajaxManager = true;
      // eslint-disable-next-line no-console
      console.log('  âœ… AjaxManager disponible');
    }

    // PollingManager ya estÃ¡ disponible globalmente
    if (typeof pollingManager !== 'undefined') {
      this.systems.pollingManager = true;
      // eslint-disable-next-line no-console
      console.log('  âœ… PollingManager disponible');
    }
  },

  /**
   * Inicializar sistemas de alto nivel (UnifiedDashboard, SyncDashboard, etc.)
   * @function initHighLevelSystems
   * @returns {void}
   * @private
   */
  initHighLevelSystems() {
    // eslint-disable-next-line no-console
    console.log('ðŸš€ Inicializando sistemas de alto nivel...');

    // UnifiedDashboard
    // eslint-disable-next-line no-restricted-globals
    if (typeof window !== 'undefined' &amp;&amp; typeof window.UnifiedDashboard !== 'undefined') {
      try {
        // eslint-disable-next-line no-restricted-globals
        window.UnifiedDashboard.init();
        this.systems.unifiedDashboard = true;
        // eslint-disable-next-line no-console
        console.log('  âœ… UnifiedDashboard inicializado');
      } catch (error) {
        // eslint-disable-next-line no-console
        console.error('  âŒ Error inicializando UnifiedDashboard:', error);
      }
    }

    // SyncDashboard (se inicializa automÃ¡ticamente si existe el elemento)
    // Nota: SyncDashboard se define dentro de jQuery(document).ready,
    // por lo que verificamos window.syncDashboard en lugar de la clase
    if (jQuery('#sync-two-phase-dashboard').length) {
      try {
        // SyncDashboard ya se inicializa automÃ¡ticamente
        // Solo verificamos si estÃ¡ disponible
        // eslint-disable-next-line no-restricted-globals
        if (typeof window !== 'undefined' &amp;&amp; window.syncDashboard) {
          this.systems.syncDashboard = true;
          // eslint-disable-next-line no-console
          console.log('  âœ… SyncDashboard disponible');
        } else {
          // eslint-disable-next-line no-console
          console.warn('  âš ï¸ SyncDashboard no estÃ¡ disponible aÃºn');
        }
      } catch (error) {
        // eslint-disable-next-line no-console
        console.error('  âŒ Error verificando SyncDashboard:', error);
      }
    }

    // SystemEventManager
    // eslint-disable-next-line no-restricted-globals
    if (typeof window !== 'undefined' &amp;&amp; typeof window.SystemEventManager !== 'undefined') {
      try {
        // eslint-disable-next-line no-restricted-globals
        window.SystemEventManager.init();
        this.systems.systemEventManager = true;
        // eslint-disable-next-line no-console
        console.log('  âœ… SystemEventManager inicializado');
      } catch (error) {
        // eslint-disable-next-line no-console
        console.error('  âŒ Error inicializando SystemEventManager:', error);
      }
    }

    // ResponsiveLayout (ya se inicializa automÃ¡ticamente)
    // eslint-disable-next-line no-restricted-globals
    if (typeof window !== 'undefined' &amp;&amp; typeof window.ResponsiveLayout !== 'undefined') {
      this.systems.responsiveLayout = true;
      // eslint-disable-next-line no-console
      console.log('  âœ… ResponsiveLayout disponible');
    }
  },

  /**
   * Inicializar eventos del sidebar
   * @function initSidebar
   * @returns {void}
   * @private
   */
  initSidebar() {
    // eslint-disable-next-line no-console
    console.log('ðŸ“‹ Inicializando eventos del sidebar...');

    // El toggle del sidebar estÃ¡ manejado por UnifiedSidebar
    // UnifiedDashboardController solo necesita verificar el estado inicial
    // y delegar a UnifiedSidebar si estÃ¡ disponible
    
    // Verificar estado guardado en localStorage
    // eslint-disable-next-line no-restricted-globals
    if (typeof window !== 'undefined' &amp;&amp; window.localStorage) {
      const savedState = window.localStorage.getItem('dashboard-sidebar-visible');
      if (savedState !== null) {
        this.isSidebarVisible = savedState === 'true';
      }
    }

    // Si UnifiedSidebar estÃ¡ disponible, delegar a Ã©l
    if (window.unifiedSidebar &amp;&amp; typeof window.unifiedSidebar.hideSidebar === 'function') {
      if (!this.isSidebarVisible) {
        window.unifiedSidebar.hideSidebar();
      }
      // Actualizar estado interno
      this.isSidebarVisible = window.unifiedSidebar.isSidebarVisible;
    } else {
      // Fallback: manejar manualmente si UnifiedSidebar no estÃ¡ disponible
      const $sidebar = jQuery('.mi-integracion-api-sidebar');
      if ($sidebar.length &amp;&amp; !this.isSidebarVisible) {
        $sidebar.hide();
      }
    }
  },

  /**
   * Toggle del sidebar
   * @function toggleSidebar
   * @returns {void}
   * @description Delega a UnifiedSidebar si estÃ¡ disponible
   */
  toggleSidebar() {
    // eslint-disable-next-line no-console
    console.log('ðŸ”„ Cambiando visibilidad del sidebar...');

    // Delegar a UnifiedSidebar si estÃ¡ disponible
    if (window.unifiedSidebar &amp;&amp; typeof window.unifiedSidebar.toggleSidebar === 'function') {
      window.unifiedSidebar.toggleSidebar();
      // Actualizar estado interno
      this.isSidebarVisible = window.unifiedSidebar.isSidebarVisible;
    } else {
      // Fallback: manejar manualmente
      if (this.isSidebarVisible) {
        this.hideSidebar();
      } else {
        this.showSidebar();
      }
    }
  },

  /**
   * Ocultar sidebar
   * @function hideSidebar
   * @returns {void}
   * @description Delega a UnifiedSidebar si estÃ¡ disponible
   */
  hideSidebar() {
    // eslint-disable-next-line no-console
    console.log('ðŸ‘ï¸ Ocultando sidebar...');

    // Delegar a UnifiedSidebar si estÃ¡ disponible
    if (window.unifiedSidebar &amp;&amp; typeof window.unifiedSidebar.hideSidebar === 'function') {
      window.unifiedSidebar.hideSidebar();
      this.isSidebarVisible = false;
    } else {
      // Fallback: ocultar manualmente
      const $sidebar = jQuery('.mi-integracion-api-sidebar');
      if ($sidebar.length) {
        $sidebar.fadeOut(300);
        this.isSidebarVisible = false;
        // eslint-disable-next-line no-restricted-globals
        if (typeof window !== 'undefined' &amp;&amp; window.localStorage) {
          window.localStorage.setItem('dashboard-sidebar-visible', 'false');
        }
      }
    }
  },

  /**
   * Mostrar sidebar
   * @function showSidebar
   * @returns {void}
   * @description Delega a UnifiedSidebar si estÃ¡ disponible
   */
  showSidebar() {
    // eslint-disable-next-line no-console
    console.log('ðŸ‘ï¸ Mostrando sidebar...');

    // Delegar a UnifiedSidebar si estÃ¡ disponible
    if (window.unifiedSidebar &amp;&amp; typeof window.unifiedSidebar.showSidebar === 'function') {
      window.unifiedSidebar.showSidebar();
      this.isSidebarVisible = true;
    } else {
      // Fallback: mostrar manualmente
      const $sidebar = jQuery('.mi-integracion-api-sidebar');
      if ($sidebar.length) {
        $sidebar.fadeIn(300);
        this.isSidebarVisible = true;
        // eslint-disable-next-line no-restricted-globals
        if (typeof window !== 'undefined' &amp;&amp; window.localStorage) {
          window.localStorage.setItem('dashboard-sidebar-visible', 'true');
        }
      }
    }
  },

  /**
   * Inicializar eventos de la vista global
   * @function initGlobalView
   * @returns {void}
   * @private
   */
  initGlobalView() {
    // eslint-disable-next-line no-console
    console.log('ðŸŒ Inicializando eventos de la vista global...');

    // Manejar clics en los botones del encabezado
    jQuery('.global-header button').on('click', (e) => {
      this.handleHeaderClick(e);
    });
  },

  /**
   * Manejar clics en el encabezado
   * @function handleHeaderClick
   * @param {Event} e - Evento de click
   * @returns {void}
   * @private
   */
  handleHeaderClick(e) {
    // eslint-disable-next-line no-console
    console.log('ðŸ–±ï¸ Manejando clic en el encabezado...');

    const $button = jQuery(e.target).closest('button');
    const buttonId = $button.attr('id');

    // Implementar lÃ³gica especÃ­fica segÃºn el botÃ³n
    if (buttonId) {
      // eslint-disable-next-line no-console
      console.log(`  BotÃ³n clickeado: ${buttonId}`);
    }
  },

  /**
   * Cargar datos iniciales
   * @function loadData
   * @returns {void}
   * @private
   */
  loadData() {
    // eslint-disable-next-line no-console
    console.log('ðŸ“Š Cargando datos iniciales...');

    // Cargar estado de sincronizaciÃ³n si SyncDashboard estÃ¡ disponible
    // eslint-disable-next-line no-restricted-globals
    if (this.systems.syncDashboard &amp;&amp; typeof window !== 'undefined' &amp;&amp; window.syncDashboard) {
      // eslint-disable-next-line no-restricted-globals
      window.syncDashboard.loadCurrentStatus();
    }

    // Cargar estado del sistema si UnifiedDashboard estÃ¡ disponible
    if (this.systems.unifiedDashboard) {
      // UnifiedDashboard carga datos bajo demanda, no automÃ¡ticamente
    }

    // Simular carga de datos adicionales
    setTimeout(() => {
      this.lastSyncedData = {
        timestamp: new Date(),
        systems: this.systems
      };
      // eslint-disable-next-line no-console
      console.log('âœ… Datos cargados:', this.lastSyncedData);

      // Actualizar la vista con los nuevos datos
      this.updateView();
    }, 1000);
  },

  /**
   * Actualizar la vista del dashboard
   * @function updateView
   * @returns {void}
   * @private
   */
  updateView() {
    // eslint-disable-next-line no-console
    console.log('ðŸ”„ Actualizando vista del dashboard...');

    // Actualizar indicadores de estado de sistemas
    this.updateSystemIndicators();
  },

  /**
   * Actualizar indicadores de estado de sistemas
   * @function updateSystemIndicators
   * @returns {void}
   * @private
   */
  updateSystemIndicators() {
    // Esta funciÃ³n puede actualizar indicadores visuales del estado de los sistemas
    const totalSystems = Object.keys(this.systems).length;
    const activeSystems = Object.values(this.systems).filter(function(s) {
      return s === true;
    }).length;

    // eslint-disable-next-line no-console
    console.log(`ðŸ“ˆ Sistemas activos: ${activeSystems}/${totalSystems}`);
  },

  /**
   * Obtener estado del controlador
   * @function getState
   * @returns {Object} Estado actual del controlador
   */
  getState() {
    return {
      initialized: this.initialized,
      isSidebarVisible: this.isSidebarVisible,
      lastSyncedData: this.lastSyncedData,
      systems: this.systems
    };
  },

  /**
   * Reinicializar el controlador
   * @function reinit
   * @returns {void}
   */
  reinit() {
    // eslint-disable-next-line no-console
    console.log('ðŸ”„ Reinicializando UnifiedDashboardController...');
    this.initialized = false;
    this.init();
  }
};

/**
 * Exponer UnifiedDashboardController globalmente para mantener compatibilidad
 * con el cÃ³digo existente que usa window.UnifiedDashboardController
 */
// eslint-disable-next-line no-restricted-globals
if (typeof window !== 'undefined') {
  try {
    // eslint-disable-next-line no-restricted-globals
    window.UnifiedDashboardController = UnifiedDashboardController;
  } catch (error) {
    try {
      // eslint-disable-next-line no-restricted-globals
      Object.defineProperty(window, 'UnifiedDashboardController', {
        value: UnifiedDashboardController,
        writable: true,
        enumerable: true,
        configurable: true
      });
    } catch (defineError) {
      // eslint-disable-next-line no-console
      if (typeof console !== 'undefined' &amp;&amp; console.warn) {
        // eslint-disable-next-line no-console
        console.warn('No se pudo asignar UnifiedDashboardController a window:', defineError, error);
      }
    }
  }
}

// Inicializar automÃ¡ticamente cuando el DOM estÃ© listo
jQuery(document).ready(function() {
  UnifiedDashboardController.init();
});

/* global module */
if (typeof module !== 'undefined' &amp;&amp; module.exports) {
  module.exports = { UnifiedDashboardController };
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.5</a> on Thu Nov 13 2025 05:45:58 GMT+0100 (hora estÃ¡ndar de Europa central) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
