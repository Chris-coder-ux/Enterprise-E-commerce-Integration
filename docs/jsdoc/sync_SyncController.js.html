<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>sync/SyncController.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AjaxManager.html">AjaxManager</a><ul class='methods'><li data-type='method'><a href="AjaxManager.html#.call">call</a></li></ul></li><li><a href="ErrorHandler.html">ErrorHandler</a><ul class='methods'><li data-type='method'><a href="ErrorHandler.html#.logError">logError</a></li><li data-type='method'><a href="ErrorHandler.html#.showCancelError">showCancelError</a></li><li data-type='method'><a href="ErrorHandler.html#.showConnectionError">showConnectionError</a></li><li data-type='method'><a href="ErrorHandler.html#.showCriticalError">showCriticalError</a></li><li data-type='method'><a href="ErrorHandler.html#.showProtectionError">showProtectionError</a></li><li data-type='method'><a href="ErrorHandler.html#.showUIError">showUIError</a></li></ul></li><li><a href="EventCleanupManager.html">EventCleanupManager</a><ul class='methods'><li data-type='method'><a href="EventCleanupManager.html#cleanupAll">cleanupAll</a></li><li data-type='method'><a href="EventCleanupManager.html#getStats">getStats</a></li><li data-type='method'><a href="EventCleanupManager.html#.cleanupComponent">cleanupComponent</a></li><li data-type='method'><a href="EventCleanupManager.html#.getInstance">getInstance</a></li><li data-type='method'><a href="EventCleanupManager.html#.registerCustomEventListener">registerCustomEventListener</a></li><li data-type='method'><a href="EventCleanupManager.html#.registerDocumentListener">registerDocumentListener</a></li><li data-type='method'><a href="EventCleanupManager.html#.registerElementListener">registerElementListener</a></li><li data-type='method'><a href="EventCleanupManager.html#.registerNativeListener">registerNativeListener</a></li></ul></li><li></li><li></li><li><a href="PollingManager.html">PollingManager</a><ul class='methods'><li data-type='method'><a href="PollingManager.html#adjustPolling">adjustPolling</a></li><li data-type='method'><a href="PollingManager.html#emit">emit</a></li><li data-type='method'><a href="PollingManager.html#getIntervalId">getIntervalId</a></li><li data-type='method'><a href="PollingManager.html#isPollingActive">isPollingActive</a></li><li data-type='method'><a href="PollingManager.html#off">off</a></li><li data-type='method'><a href="PollingManager.html#on">on</a></li><li data-type='method'><a href="PollingManager.html#recordError">recordError</a></li><li data-type='method'><a href="PollingManager.html#recordResponseTime">recordResponseTime</a></li><li data-type='method'><a href="PollingManager.html#reset">reset</a></li><li data-type='method'><a href="PollingManager.html#startPolling">startPolling</a></li><li data-type='method'><a href="PollingManager.html#stopAllPolling">stopAllPolling</a></li><li data-type='method'><a href="PollingManager.html#stopPolling">stopPolling</a></li></ul></li><li></li><li></li><li><a href="SyncDashboard.html">SyncDashboard</a><ul class='methods'><li data-type='method'><a href="SyncDashboard.html#cancelPhase1">cancelPhase1</a></li><li data-type='method'><a href="SyncDashboard.html#cancelSync">cancelSync</a></li><li data-type='method'><a href="SyncDashboard.html#disableButton">disableButton</a></li><li data-type='method'><a href="SyncDashboard.html#enableButton">enableButton</a></li><li data-type='method'><a href="SyncDashboard.html#handlePhase1Response">handlePhase1Response</a></li><li data-type='method'><a href="SyncDashboard.html#loadCurrentStatus">loadCurrentStatus</a></li><li data-type='method'><a href="SyncDashboard.html#pausePhase2">pausePhase2</a></li><li data-type='method'><a href="SyncDashboard.html#resumePhase1">resumePhase1</a></li><li data-type='method'><a href="SyncDashboard.html#startPhase1">startPhase1</a></li><li data-type='method'><a href="SyncDashboard.html#startPhase2">startPhase2</a></li><li data-type='method'><a href="SyncDashboard.html#startTimer">startTimer</a></li><li data-type='method'><a href="SyncDashboard.html#stopTimer">stopTimer</a></li><li data-type='method'><a href="SyncDashboard.html#updateConfig">updateConfig</a></li><li data-type='method'><a href="SyncDashboard.html#updateDashboardFromStatus">updateDashboardFromStatus</a></li><li data-type='method'><a href="SyncDashboard.html#updatePhase1Progress">updatePhase1Progress</a></li><li data-type='method'><a href="SyncDashboard.html#updatePhase2Progress">updatePhase2Progress</a></li><li data-type='method'><a href="SyncDashboard.html#updatePhaseStatus">updatePhaseStatus</a></li></ul></li><li></li><li></li><li><a href="UIOptimizer.html">UIOptimizer</a><ul class='methods'><li data-type='method'><a href="UIOptimizer.html#cancelPendingUpdates">cancelPendingUpdates</a></li><li data-type='method'><a href="UIOptimizer.html#clearCache">clearCache</a></li><li data-type='method'><a href="UIOptimizer.html#scheduleUpdate">scheduleUpdate</a></li><li data-type='method'><a href="UIOptimizer.html#.getInstance">getInstance</a></li><li data-type='method'><a href="UIOptimizer.html#.updateCssIfChanged">updateCssIfChanged</a></li><li data-type='method'><a href="UIOptimizer.html#.updateDataIfChanged">updateDataIfChanged</a></li><li data-type='method'><a href="UIOptimizer.html#.updateHtmlIfChanged">updateHtmlIfChanged</a></li><li data-type='method'><a href="UIOptimizer.html#.updateTextIfChanged">updateTextIfChanged</a></li><li data-type='method'><a href="UIOptimizer.html#.updateValueIfChanged">updateValueIfChanged</a></li></ul></li><li></li><li></li></ul><h3>Modules</h3><ul><li><a href="module-ui_SidebarController.html">ui/SidebarController</a></li><li><a href="module-utils_FormatUtils.html">utils/FormatUtils</a></li></ul><h3>Namespaces</h3><ul><li></li><li><a href="CardManager.html">CardManager</a></li><li></li><li><a href="ConsoleManager.html">ConsoleManager</a></li><li><a href="DASHBOARD_CONFIG.html">DASHBOARD_CONFIG</a></li><li></li><li><a href="global.html#DomUtils">DomUtils</a></li><li></li><li><a href="MESSAGES.html">MESSAGES</a></li><li><a href="global.html#NonceManager">NonceManager</a></li><li><a href="global.html#Phase1Manager">Phase1Manager</a></li><li><a href="global.html#Phase2Manager">Phase2Manager</a></li><li><a href="global.html#ProgressBar">ProgressBar</a></li><li><a href="ResponsiveLayout.html">ResponsiveLayout</a></li><li></li><li><a href="SELECTORS.html">SELECTORS</a></li><li></li><li><a href="global.html#Sanitizer">Sanitizer</a><ul class='methods'><li data-type='method'><a href="global.html#Sanitizer#.escapeHtml">escapeHtml</a></li><li data-type='method'><a href="global.html#Sanitizer#.sanitizeHtml">sanitizeHtml</a></li><li data-type='method'><a href="global.html#Sanitizer#.sanitizeMessage">sanitizeMessage</a></li></ul></li><li><a href="global.html#SyncController">SyncController</a></li><li><a href="global.html#SyncProgress">SyncProgress</a></li><li><a href="global.html#SyncStateManager">SyncStateManager</a></li><li><a href="global.html#SystemEventManager">SystemEventManager</a><ul class='methods'><li data-type='method'><a href="global.html#SystemEventManager#.checkAllSystemsReady">checkAllSystemsReady</a></li><li data-type='method'><a href="global.html#SystemEventManager#.checkDependencies">checkDependencies</a></li><li data-type='method'><a href="global.html#SystemEventManager#.emitErrorHandlerReady">emitErrorHandlerReady</a></li><li data-type='method'><a href="global.html#SystemEventManager#.emitSystemBaseReady">emitSystemBaseReady</a></li><li data-type='method'><a href="global.html#SystemEventManager#.emitUnifiedDashboardReady">emitUnifiedDashboardReady</a></li><li data-type='method'><a href="global.html#SystemEventManager#.getInitializationState">getInitializationState</a></li><li data-type='method'><a href="global.html#SystemEventManager#.init">init</a></li><li data-type='method'><a href="global.html#SystemEventManager#.initializeSystem">initializeSystem</a></li><li data-type='method'><a href="global.html#SystemEventManager#.log">log</a></li><li data-type='method'><a href="global.html#SystemEventManager#.registerSystem">registerSystem</a></li></ul></li><li><a href="global.html#ToastManager">ToastManager</a></li><li><a href="UnifiedDashboard.html">UnifiedDashboard</a><ul class='methods'><li data-type='method'><a href="UnifiedDashboard.html#.init">init</a></li><li data-type='method'><a href="UnifiedDashboard.html#.toggleDebugMode">toggleDebugMode</a></li></ul></li><li></li><li><a href="UnifiedDashboardController.html">UnifiedDashboardController</a></li><li></li></ul><h3>Global</h3><ul><li><a href="global.html#DEFAULT_DURATION">DEFAULT_DURATION</a></li><li><a href="global.html#DEFAULT_RENEWAL_INTERVAL">DEFAULT_RENEWAL_INTERVAL</a></li><li><a href="global.html#DEFAULT_SELECTOR">DEFAULT_SELECTOR</a></li><li><a href="global.html#DOM_CACHE">DOM_CACHE</a></li><li><a href="global.html#TOAST_CLASSES">TOAST_CLASSES</a></li><li><a href="global.html#TOAST_COLORS">TOAST_COLORS</a></li><li><a href="global.html#TOAST_ICONS">TOAST_ICONS</a></li><li><a href="global.html#adjustLayout">adjustLayout</a></li><li><a href="global.html#attemptRenewal">attemptRenewal</a></li><li><a href="global.html#check">check</a></li><li><a href="global.html#cleanupOnPageLoad">cleanupOnPageLoad</a></li><li><a href="global.html#cleanupSyncProgressListeners">cleanupSyncProgressListeners</a></li><li><a href="global.html#clearPhase2PollingInterval">clearPhase2PollingInterval</a></li><li><a href="global.html#clearSyncInterval">clearSyncInterval</a></li><li><a href="global.html#error">error</a></li><li><a href="global.html#getCache">getCache</a></li><li><a href="global.html#getFadeInDuration">getFadeInDuration</a></li><li><a href="global.html#getInactiveProgressCounter">getInactiveProgressCounter</a></li><li><a href="global.html#getLastProgressValue">getLastProgressValue</a></li><li><a href="global.html#getPhase1Initialized">getPhase1Initialized</a></li><li><a href="global.html#getPhase1Starting">getPhase1Starting</a></li><li><a href="global.html#getPhase2Initialized">getPhase2Initialized</a></li><li><a href="global.html#getPhase2PollingInterval">getPhase2PollingInterval</a></li><li><a href="global.html#getPhase2ProcessingBatch">getPhase2ProcessingBatch</a></li><li><a href="global.html#getPhase2Starting">getPhase2Starting</a></li><li><a href="global.html#getPollingInterval">getPollingInterval</a></li><li><a href="global.html#getState">getState</a></li><li><a href="global.html#getSyncInterval">getSyncInterval</a></li><li><a href="global.html#getTrackingState">getTrackingState</a></li><li><a href="global.html#getWidth">getWidth</a></li><li><a href="global.html#hideSidebar">hideSidebar</a></li><li><a href="global.html#inactiveProgressCounter">inactiveProgressCounter</a></li><li><a href="global.html#incrementInactiveProgressCounter">incrementInactiveProgressCounter</a></li><li><a href="global.html#info">info</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#initCache">initCache</a></li><li><a href="global.html#initResponsiveMenu">initResponsiveMenu</a></li><li><a href="global.html#initialize">initialize</a></li><li><a href="global.html#initializeSyncDashboard">initializeSyncDashboard</a></li><li><a href="global.html#isAutoRenewalActive">isAutoRenewalActive</a></li><li><a href="global.html#isAvailable">isAvailable</a></li><li><a href="global.html#isCacheInitialized">isCacheInitialized</a></li><li><a href="global.html#isComplete">isComplete</a></li><li><a href="global.html#isPollingActive">isPollingActive</a></li><li><a href="global.html#phase1Starting">phase1Starting</a></li><li><a href="global.html#phase2Starting">phase2Starting</a></li><li><a href="global.html#pollingManager">pollingManager</a></li><li><a href="global.html#proceedWithSync">proceedWithSync</a></li><li><a href="global.html#processNextBatchAutomatically">processNextBatchAutomatically</a></li><li><a href="global.html#refreshCache">refreshCache</a></li><li><a href="global.html#reinit">reinit</a></li><li><a href="global.html#renewalIntervalId">renewalIntervalId</a></li><li><a href="global.html#reset">reset</a></li><li><a href="global.html#resetAllState">resetAllState</a></li><li><a href="global.html#resetCounters">resetCounters</a></li><li><a href="global.html#resetPhase1State">resetPhase1State</a></li><li><a href="global.html#resetPhase2State">resetPhase2State</a></li><li><a href="global.html#setColor">setColor</a></li><li><a href="global.html#setInactiveProgressCounter">setInactiveProgressCounter</a></li><li><a href="global.html#setLastProgressValue">setLastProgressValue</a></li><li><a href="global.html#setPercentage">setPercentage</a></li><li><a href="global.html#setPhase1Initialized">setPhase1Initialized</a></li><li><a href="global.html#setPhase1Starting">setPhase1Starting</a></li><li><a href="global.html#setPhase2Initialized">setPhase2Initialized</a></li><li><a href="global.html#setPhase2PollingInterval">setPhase2PollingInterval</a></li><li><a href="global.html#setPhase2ProcessingBatch">setPhase2ProcessingBatch</a></li><li><a href="global.html#setPhase2Starting">setPhase2Starting</a></li><li><a href="global.html#setSyncInterval">setSyncInterval</a></li><li><a href="global.html#setWidth">setWidth</a></li><li><a href="global.html#setupAutoRenewal">setupAutoRenewal</a></li><li><a href="global.html#show">show</a></li><li><a href="global.html#showSidebar">showSidebar</a></li><li><a href="global.html#start">start</a></li><li><a href="global.html#stop">stop</a></li><li><a href="global.html#stopAutoRenewal">stopAutoRenewal</a></li><li><a href="global.html#stopProgressPolling">stopProgressPolling</a></li><li><a href="global.html#success">success</a></li><li><a href="global.html#toggleSidebar">toggleSidebar</a></li><li><a href="global.html#trackingState">trackingState</a></li><li><a href="global.html#updateCardData">updateCardData</a></li><li><a href="global.html#updateSpecificCard">updateSpecificCard</a></li><li><a href="global.html#warning">warning</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">sync/SyncController.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Controlador Principal de Sincronización
 *
 * Gestiona el flujo principal de sincronización, incluyendo confirmación del usuario,
 * configuración de UI, y orquestación de las fases de sincronización.
 *
 * @module sync/SyncController
 * @namespace SyncController
 * @since 1.0.0
 * @author Christian
 */

/* global jQuery, miIntegracionApiDashboard, DASHBOARD_CONFIG, DOM_CACHE, Phase1Manager, SyncStateManager, ErrorHandler, window */

/**
 * Muestra el diálogo de confirmación para iniciar la sincronización
 *
 * @param {string|null} customMessage - Mensaje personalizado de confirmación
 * @returns {boolean} true si el usuario confirma, false si cancela
 * @private
 */
function showConfirmationDialog(customMessage) {
  const defaultMessage = '¿Estás seguro de que deseas iniciar una sincronización manual ahora?';
  const message = customMessage || defaultMessage;

  try {
    if (typeof confirm === 'function') {
      return confirm(message);
    } else {
      // eslint-disable-next-line no-console
      console.warn('confirm() no está disponible');
      return false;
    }
  } catch (error) {
    // eslint-disable-next-line no-console
    console.error('Error al llamar confirm():', error);
    try {
      return confirm(defaultMessage);
    } catch (fallbackError) {
      // eslint-disable-next-line no-console
      console.error('Error en fallback confirm():', fallbackError);
      // Si todo falla, proceder sin confirmación
      return true;
    }
  }
}

/**
 * Restaura el estado de los controles UI cuando se cancela la sincronización
 *
 * @param {string} originalText - Texto original del botón
 * @returns {void}
 * @private
 */
function restoreUICancelled(originalText) {
  if (DOM_CACHE &amp;&amp; DOM_CACHE.$syncBtn) {
    DOM_CACHE.$syncBtn.prop('disabled', false).text(originalText || 'Sincronizar productos en lote');
  }
  if (DOM_CACHE &amp;&amp; DOM_CACHE.$batchSizeSelector) {
    DOM_CACHE.$batchSizeSelector.prop('disabled', false);
  }
}

/**
 * Configura la UI para iniciar la sincronización
 *
 * @returns {void}
 * @private
 */
function setupSyncUI() {
  if (DOM_CACHE &amp;&amp; DOM_CACHE.$syncBtn) {
    DOM_CACHE.$syncBtn.prop('disabled', true);
  }
  if (DOM_CACHE &amp;&amp; DOM_CACHE.$batchSizeSelector) {
    DOM_CACHE.$batchSizeSelector.prop('disabled', true);
  }
  if (DOM_CACHE &amp;&amp; DOM_CACHE.$feedback) {
    DOM_CACHE.$feedback.addClass('in-progress').text('Iniciando sincronización...');
  }
  if (DOM_CACHE &amp;&amp; DOM_CACHE.$syncStatusContainer) {
    DOM_CACHE.$syncStatusContainer.css('display', 'block');
  }
  if (DOM_CACHE &amp;&amp; DOM_CACHE.$cancelBtn) {
    DOM_CACHE.$cancelBtn.prop('disabled', false).removeClass('button-secondary').addClass('button-secondary');
  }
  if (DOM_CACHE &amp;&amp; DOM_CACHE.$progressBar) {
    DOM_CACHE.$progressBar.css({
      'width': '2%',
      'background-color': '#0073aa',
      'transition': 'width 0.3s ease'
    });
  }
  if (DOM_CACHE &amp;&amp; DOM_CACHE.$progressInfo &amp;&amp; DASHBOARD_CONFIG &amp;&amp; DASHBOARD_CONFIG.messages &amp;&amp; DASHBOARD_CONFIG.messages.progress) {
    DOM_CACHE.$progressInfo.text(DASHBOARD_CONFIG.messages.progress.preparing);
  }
}

/**
 * Resetea los contadores de sincronización usando SyncStateManager
 *
 * @returns {void}
 * @private
 */
function resetSyncCounters() {
  if (typeof SyncStateManager !== 'undefined' &amp;&amp; SyncStateManager) {
    if (typeof SyncStateManager.setInactiveProgressCounter === 'function') {
      SyncStateManager.setInactiveProgressCounter(0);
    }
    if (typeof SyncStateManager.setLastProgressValue === 'function') {
      SyncStateManager.setLastProgressValue(0);
    }
  }
}

/**
 * Inicia el proceso de sincronización
 *
 * Orquesta el flujo completo de sincronización, incluyendo confirmación del usuario,
 * configuración de UI, y inicio de la Fase 1.
 *
 * @param {string} originalText - Texto original del botón de sincronización
 * @returns {void}
 *
 * @example
 * SyncController.proceedWithSync('Sincronizar productos en lote');
 */
function proceedWithSync(originalText) {
  try {
    // Verificar dependencias críticas
    if (typeof jQuery === 'undefined') {
      if (typeof ErrorHandler !== 'undefined' &amp;&amp; ErrorHandler &amp;&amp; typeof ErrorHandler.logError === 'function') {
        ErrorHandler.logError('jQuery no está disponible para SyncController', 'SYNC_START');
      }
      return;
    }

    // eslint-disable-next-line prefer-optional-chain
    if (typeof DOM_CACHE === 'undefined' || !DOM_CACHE) {
      if (typeof ErrorHandler !== 'undefined' &amp;&amp; ErrorHandler &amp;&amp; typeof ErrorHandler.logError === 'function') {
        ErrorHandler.logError('DOM_CACHE no está disponible', 'SYNC_START');
      }
      return;
    }

    // Actualizar la variable global con el texto original
    if (typeof window !== 'undefined') {
      window.originalSyncButtonText = originalText;
    }

    // Obtener batch size del selector
    const batchSize = (DOM_CACHE.$batchSizeSelector &amp;&amp; DOM_CACHE.$batchSizeSelector.val())
      ? parseInt(DOM_CACHE.$batchSizeSelector.val(), 10) || 20
      : 20;

    // Verificar si hay mensaje de confirmación y mostrar un diálogo
    const confirmMessage = (typeof miIntegracionApiDashboard !== 'undefined' &amp;&amp; miIntegracionApiDashboard &amp;&amp; miIntegracionApiDashboard.confirmSync)
      ? miIntegracionApiDashboard.confirmSync
      : null;

    const confirmResult = showConfirmationDialog(confirmMessage);

    if (!confirmResult) {
      // Restaurar botón cuando se cancela
      restoreUICancelled(originalText);
      return;
    }

    // Configurar UI una sola vez
    setupSyncUI();

    // Resetear contadores usando SyncStateManager
    resetSyncCounters();

    // ✅ NUEVO: Arquitectura en dos fases - Primero ejecutar Fase 1 (sincronización de imágenes)
    // Usar Phase1Manager para iniciar Fase 1
    if (typeof Phase1Manager !== 'undefined' &amp;&amp; Phase1Manager &amp;&amp; typeof Phase1Manager.start === 'function') {
      Phase1Manager.start(batchSize, originalText);
    } else {
      // Fallback: si Phase1Manager no está disponible, mostrar error
      // eslint-disable-next-line no-console
      console.error('Phase1Manager no está disponible');
      if (typeof ErrorHandler !== 'undefined' &amp;&amp; ErrorHandler &amp;&amp; typeof ErrorHandler.logError === 'function') {
        ErrorHandler.logError('Phase1Manager no está disponible', 'SYNC_START');
      }
      if (DOM_CACHE &amp;&amp; DOM_CACHE.$syncBtn) {
        DOM_CACHE.$syncBtn.prop('disabled', false).text(originalText);
      }
      if (DOM_CACHE &amp;&amp; DOM_CACHE.$batchSizeSelector) {
        DOM_CACHE.$batchSizeSelector.prop('disabled', false);
      }
      if (DOM_CACHE &amp;&amp; DOM_CACHE.$feedback) {
        DOM_CACHE.$feedback.text('Error: Phase1Manager no está disponible');
      }
    }

  } catch (error) {
    // eslint-disable-next-line no-console
    console.error('Error en proceedWithSync():', error);
    // eslint-disable-next-line no-console
    console.error('Stack trace:', error.stack);

    // Restaurar botón en caso de error
    if (DOM_CACHE &amp;&amp; DOM_CACHE.$syncBtn) {
      DOM_CACHE.$syncBtn.prop('disabled', false).text('Sincronizar productos en lote');
    }
    if (DOM_CACHE &amp;&amp; DOM_CACHE.$batchSizeSelector) {
      DOM_CACHE.$batchSizeSelector.prop('disabled', false);
    }
    if (DOM_CACHE &amp;&amp; DOM_CACHE.$feedback) {
      DOM_CACHE.$feedback.removeClass('in-progress').text('Error: ' + (error.message || 'Error desconocido'));
    }
  }
}

/**
 * Objeto SyncController con métodos públicos
 */
const SyncController = {
  proceedWithSync
};

/**
 * Exponer SyncController globalmente para mantener compatibilidad
 * con el código existente que usa window.SyncController y window.proceedWithSync
 */
// eslint-disable-next-line no-restricted-globals
if (typeof window !== 'undefined') {
  try {
    // eslint-disable-next-line no-restricted-globals
    window.SyncController = SyncController;
    // Exponer también la función proceedWithSync para compatibilidad
    // eslint-disable-next-line no-restricted-globals
    window.proceedWithSync = proceedWithSync;
  } catch (error) {
    try {
      // eslint-disable-next-line no-restricted-globals
      Object.defineProperty(window, 'SyncController', {
        value: SyncController,
        writable: true,
        enumerable: true,
        configurable: true
      });
      // eslint-disable-next-line no-restricted-globals
      Object.defineProperty(window, 'proceedWithSync', {
        value: proceedWithSync,
        writable: true,
        enumerable: true,
        configurable: true
      });
    } catch (defineError) {
      // eslint-disable-next-line no-console
      if (typeof console !== 'undefined' &amp;&amp; console.warn) {
        // eslint-disable-next-line no-console
        console.warn('No se pudo asignar SyncController a window:', defineError, error);
      }
    }
  }
}

/* global module */
if (typeof module !== 'undefined' &amp;&amp; module.exports) {
  module.exports = { SyncController };
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.5</a> on Thu Nov 13 2025 05:45:58 GMT+0100 (hora estándar de Europa central) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
