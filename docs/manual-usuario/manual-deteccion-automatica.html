<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual de Detecci√≥n Autom√°tica - Mi Integraci√≥n API</title>
    <link rel="stylesheet" href="manual-usuario.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="manual-container">
        <!-- Header -->
        <header class="manual-header">
            <div class="header-content">
                <h1><i class="fas fa-search"></i> Manual de Detecci√≥n Autom√°tica</h1>
                <div class="version-info">Versi√≥n 2.0.0</div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="manual-nav">
            <div class="nav-content">
                <h3><i class="fas fa-list"></i> √çndice</h3>
                <ul class="nav-list">
                    <li><a href="#introduccion"><i class="fas fa-info-circle"></i> Introducci√≥n</a></li>
                    <li><a href="#como-funciona"><i class="fas fa-cogs"></i> ¬øC√≥mo Funciona?</a></li>
                    <li><a href="#activacion"><i class="fas fa-power-off"></i> Activaci√≥n</a></li>
                    <li><a href="#configuracion"><i class="fas fa-sliders-h"></i> Configuraci√≥n</a></li>
                    <li><a href="#monitoreo"><i class="fas fa-chart-line"></i> Monitoreo</a></li>
                    <li><a href="#alertas"><i class="fas fa-bell"></i> Alertas del Sistema</a></li>
                    <li><a href="#acciones-rapidas"><i class="fas fa-bolt"></i> Acciones R√°pidas</a></li>
                    <li><a href="#solucion-problemas"><i class="fas fa-tools"></i> Soluci√≥n de Problemas</a></li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="manual-content">
            <!-- Introducci√≥n -->
            <section id="introduccion" class="manual-section">
                <h2><i class="fas fa-info-circle"></i> Introducci√≥n</h2>
                <p>El <strong>Sistema de Detecci√≥n Autom√°tica</strong> es una funcionalidad avanzada que monitorea continuamente tu cat√°logo de productos en Verial ERP y sincroniza autom√°ticamente los cambios con tu tienda WooCommerce.</p>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <i class="fas fa-sync-alt"></i>
                        <h3>Sincronizaci√≥n Autom√°tica</h3>
                        <p>Sincroniza cambios en tiempo real sin intervenci√≥n manual</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-clock"></i>
                        <h3>Monitoreo Continuo</h3>
                        <p>Verifica cambios cada 5 minutos configurable</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-shield-alt"></i>
                        <h3>Detecci√≥n Inteligente</h3>
                        <p>Identifica solo los productos con cambios reales</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-chart-bar"></i>
                        <h3>Estad√≠sticas en Vivo</h3>
                        <p>Seguimiento de actividad y rendimiento</p>
                    </div>
                </div>

                <div class="characteristics-box">
                    <h3><i class="fas fa-lightbulb"></i> Beneficios Principales</h3>
                    <ul class="characteristics-list">
                        <li><strong>Ahorro de Tiempo</strong>: No necesitas sincronizar manualmente los productos</li>
                        <li><strong>Actualizaci√≥n Continua</strong>: Tu cat√°logo siempre est√° actualizado</li>
                        <li><strong>Detecci√≥n Precisa</strong>: Solo actualiza los productos que realmente cambiaron</li>
                        <li><strong>Rendimiento Optimizado</strong>: Procesa lotes inteligentemente para evitar sobrecargas</li>
                        <li><strong>Alertas Inteligentes</strong>: Notificaciones cuando el stock est√° bajo</li>
                    </ul>
                </div>
            </section>

            <!-- C√≥mo Funciona -->
            <section id="como-funciona" class="manual-section">
                <h2><i class="fas fa-cogs"></i> ¬øC√≥mo Funciona?</h2>
                
                <div class="process-steps">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <h3><i class="fas fa-download"></i> Adquisici√≥n de Datos</h3>
                        <p>El sistema se conecta a la API de Verial y obtiene el estado actual de todos los productos.</p>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <h3><i class="fas fa-search"></i> Detecci√≥n de Cambios</h3>
                        <p>Compara los datos actuales con la √∫ltima sincronizaci√≥n para identificar cambios.</p>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <h3><i class="fas fa-sync-alt"></i> Sincronizaci√≥n Selectiva</h3>
                        <p>Actualiza solo los productos que han sufrido cambios en precio, stock o informaci√≥n.</p>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">4</div>
                        <h3><i class="fas fa-check-circle"></i> Verificaci√≥n y Logs</h3>
                        <p>Registra todas las operaciones en los logs del sistema para auditor√≠a.</p>
                    </div>
                </div>

                <div class="info-box">
                    <h3><i class="fas fa-info-circle"></i> Tipos de Cambios Detectados</h3>
                    <div class="change-types">
                        <div class="change-type">
                            <i class="fas fa-dollar-sign"></i>
                            <strong>Precios:</strong> Cambios en precios de compra y venta
                        </div>
                        <div class="change-type">
                            <i class="fas fa-warehouse"></i>
                            <strong>Stock:</strong> Variaciones en la cantidad disponible
                        </div>
                        <div class="change-type">
                            <i class="fas fa-tags"></i>
                            <strong>Informaci√≥n:</strong> Descripciones, categor√≠as, atributos
                        </div>
                        <div class="change-type">
                            <i class="fas fa-images"></i>
                            <strong>Im√°genes:</strong> Nuevas im√°genes o actualizaciones
                        </div>
                    </div>
                </div>
            </section>

            <!-- Activaci√≥n -->
            <section id="activacion" class="manual-section">
                <h2><i class="fas fa-power-off"></i> Activaci√≥n del Sistema</h2>
                
                <div class="activation-steps">
                    <div class="activation-step">
                        <h3><i class="fas fa-door-open"></i> Paso 1: Acceder al Dashboard</h3>
                        <p>Navega al dashboard de Detecci√≥n Autom√°tica desde el men√∫ lateral o usando la URL:</p>
                        <div class="direct-link">
                            <code>wp-admin/admin.php?page=mia-detection-dashboard</code>
                        </div>
                    </div>
                    
                    <div class="activation-step">
                        <h3><i class="fas fa-toggle-on"></i> Paso 2: Activar el Toggle</h3>
                        <p>En el panel de control principal, localiza el toggle "Detecci√≥n Autom√°tica" y act√≠valo.</p>
                        <div class="toggle-demo">
                            <div class="toggle-switch active">
                                <div class="toggle-slider"></div>
                            </div>
                            <span>Estado: <strong>Activo</strong></span>
                        </div>
                    </div>
                    
                    <div class="activation-step">
                        <h3><i class="fas fa-check-circle"></i> Paso 3: Verificar Estado</h3>
                        <p>El indicador "Sistema Activo" confirmar√° que la detecci√≥n autom√°tica est√° en funcionamiento.</p>
                        <div class="status-demo">
                            <div class="status-indicator active">
                                <div class="pulse-dot"></div>
                                <span>Sistema Activo</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="warning-box">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h4>Requisitos Previos</h4>
                    <ul>
                        <li>API de Verial correctamente configurada y accesible</li>
                        <li>WooCommerce activo y funcional</li>
                        <li>Permisos de administrador en WordPress</li>
                        <li>Conexi√≥n estable a internet</li>
                    </ul>
                </div>
            </section>

            <!-- Configuraci√≥n -->
            <section id="configuracion" class="manual-section">
                <h2><i class="fas fa-sliders-h"></i> Configuraci√≥n</h2>

                <div class="config-grid">
                    <div class="config-card">
                        <h3><i class="fas fa-clock"></i> Intervalo de Detecci√≥n</h3>
                        <p>Define la frecuencia con la que el sistema verificar√° cambios en Verial:</p>
                        <ul>
                            <li><strong>5 minutos</strong> - Verificaci√≥n frecuente (recomendado para tiendas activas)</li>
                            <li><strong>10 minutos</strong> - Balanceado entre rendimiento y actualizaci√≥n</li>
                            <li><strong>15 minutos</strong> - Menos carga en el servidor</li>
                            <li><strong>30 minutos</strong> - Ideal para cat√°logos estables</li>
                        </ul>
                    </div>

                    <div class="config-card">
                        <h3><i class="fas fa-layer-group"></i> L√≠mite de Productos</h3>
                        <p>Controla cu√°ntos productos se procesan en cada ejecuci√≥n:</p>
                        <ul>
                            <li><strong>Rango:</strong> 10 - 500 productos</li>
                            <li><strong>Valor por defecto:</strong> 100 productos</li>
                            <li><strong>Uso:</strong> Evita sobrecargas en cat√°logos grandes</li>
                        </ul>
                    </div>

                    <div class="config-card">
                        <h3><i class="fas fa-calendar-times"></i> Horario de Funcionamiento</h3>
                        <p>Establece cu√°ndo debe ejecutarse la detecci√≥n autom√°tica:</p>
                        <ul>
                            <li><strong>Horario de Inicio:</strong> Define desde qu√© hora comenzar</li>
                            <li><strong>Horario de Fin:</strong> Define hasta qu√© hora detenerse</li>
                            <li><strong>Ventana de actividad:</strong> Durante horas laborales</li>
                        </ul>
                    </div>

                    <div class="config-card">
                        <h3><i class="fas fa-bell"></i> Umbral de Stock Bajo</h3>
                        <p>Configura cu√°ndo se activar√° la alerta de stock bajo:</p>
                        <ul>
                            <li><strong>Valor por defecto:</strong> 10 unidades</li>
                            <li><strong>Personalizable:</strong> Ajusta seg√∫n tu negocio</li>
                            <li><strong>Notificaciones:</strong> Alertas autom√°ticas cuando se alcance el umbral</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Monitoreo -->
            <section id="monitoreo" class="manual-section">
                <h2><i class="fas fa-chart-line"></i> Monitoreo y Estad√≠sticas</h2>

                <div class="monitoring-cards">
                    <div class="metric-card">
                        <div class="metric-header">
                            <i class="fas fa-clock"></i>
                            <h3>√öltima Ejecuci√≥n</h3>
                        </div>
                        <div class="metric-value">Hace 5 minutos</div>
                        <p>Tiempo transcurrido desde la √∫ltima sincronizaci√≥n</p>
                    </div>

                    <div class="metric-card">
                        <div class="metric-header">
                            <i class="fas fa-sync"></i>
                            <h3>Productos Sincronizados</h3>
                        </div>
                        <div class="metric-value">1,254</div>
                        <p>Total de productos sincronizados en las √∫ltimas 24h</p>
                    </div>

                    <div class="metric-card">
                        <div class="metric-header">
                            <i class="fas fa-tachometer-alt"></i>
                            <h3>Tiempo Promedio</h3>
                        </div>
                        <div class="metric-value">2.3s</div>
                        <p>Duraci√≥n promedio por producto procesado</p>
                    </div>

                    <div class="metric-card">
                        <div class="metric-header">
                            <i class="fas fa-bullseye"></i>
                            <h3>Precisi√≥n</h3>
                        </div>
                        <div class="metric-value">99.2%</div>
                        <p>Tasa de √©xito en las sincronizaciones</p>
                    </div>
                </div>

                <div class="chart-section">
                    <h3><i class="fas fa-chart-area"></i> Gr√°fico de Actividad</h3>
                    <p>El dashboard muestra un gr√°fico de l√≠neas con la actividad de sincronizaci√≥n de las √∫ltimas 24 horas:</p>
                    <ul>
                        <li><strong>Eje X:</strong> Horas del d√≠a</li>
                        <li><strong>Eje Y:</strong> N√∫mero de productos sincronizados</li>
                        <li><strong>L√≠nea azul:</strong> Representa la actividad de sincronizaci√≥n</li>
                        <li><strong>Picos:</strong> Indican momentos de alta actividad</li>
                    </ul>
                </div>
            </section>

            <!-- Alertas del Sistema -->
            <section id="alertas" class="manual-section">
                <h2><i class="fas fa-bell"></i> Alertas del Sistema</h2>

                <div class="alert-types">
                    <div class="alert-card warning">
                        <div class="alert-header">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h3>Stock Bajo</h3>
                        </div>
                        <p>Se activa cuando un producto tiene menos unidades de las configuradas en el umbral.</p>
                        <div class="alert-example">
                            <strong>Ejemplo:</strong> 8 productos con stock inferior a 10 unidades
                        </div>
                    </div>

                    <div class="alert-card error">
                        <div class="alert-header">
                            <i class="fas fa-times-circle"></i>
                            <h3>Errores de Conexi√≥n</h3>
                        </div>
                        <p>Se muestra cuando hay problemas para conectarse a la API de Verial.</p>
                        <div class="alert-example">
                            <strong>Acci√≥n:</strong> Verificar configuraci√≥n de API y credenciales
                        </div>
                    </div>

                    <div class="alert-card info">
                        <div class="alert-header">
                            <i class="fas fa-info-circle"></i>
                            <h3>Sincronizaci√≥n Completa</h3>
                        </div>
                        <p>Confirma cuando una sincronizaci√≥n se ha completado exitosamente.</p>
                        <div class="alert-example">
                            <strong>Resultado:</strong> 145 productos actualizados sin errores
                        </div>
                    </div>
                </div>

                <div class="alert-management">
                    <h3><i class="fas fa-cog"></i> Gesti√≥n de Alertas</h3>
                    <ul>
                        <li><strong>Ver Todos:</strong> Bot√≥n para ver todos los productos con alerta</li>
                        <li><strong>Filtrar:</strong> Filtrar por tipo de alerta (stock, error, etc.)</li>
                        <li><strong>Resolver:</strong> Posibilidad de resolver alertas manualmente</li>
                        <li><strong>Exportar:</strong> Exportar reporte de alertas en CSV o JSON</li>
                    </ul>
                </div>
            </section>

            <!-- Acciones R√°pidas -->
            <section id="acciones-rapidas" class="manual-section">
                <h2><i class="fas fa-bolt"></i> Acciones R√°pidas</h2>

                <div class="quick-actions-grid">
                    <div class="action-card">
                        <div class="action-header">
                            <i class="fas fa-sync-alt"></i>
                            <h3>Ejecutar Ahora</h3>
                        </div>
                        <p>Fuerza una sincronizaci√≥n inmediata sin esperar el intervalo programado.</p>
                        <div class="action-features">
                            <i class="fas fa-check"></i> Procesa todos los productos
                            <i class="fas fa-check"></i> Actualiza solo cambios detectados
                            <i class="fas fa-check"></i> Genera reporte detallado
                        </div>
                    </div>

                    <div class="action-card">
                        <div class="action-header">
                            <i class="fas fa-pause"></i>
                            <h3>Pausar Detecci√≥n</h3>
                        </div>
                        <p>Detiene temporalmente la detecci√≥n autom√°tica sin perder configuraciones.</p>
                        <div class="action-features">
                            <i class="fas fa-check"></i> Mantiene la configuraci√≥n
                            <i class="fas fa-check"></i> Puedes reanudar en cualquier momento
                            <i class="fas fa-check"></i> No afecta sincronizaciones en curso
                        </div>
                    </div>

                    <div class="action-card">
                        <div class="action-header">
                            <i class="fas fa-chart-bar"></i>
                            <h3>Ver Reporte</h3>
                        </div>
                        <p>Genera un reporte detallado de todas las sincronizaciones realizadas.</p>
                        <div class="action-features">
                            <i class="fas fa-check"></i> Historial completo de sincronizaciones
                            <i class="fas fa-check"></i> Estad√≠sticas de rendimiento
                            <i class="fas fa-check"></i> Exportar en m√∫ltiples formatos
                        </div>
                    </div>

                    <div class="action-card">
                        <div class="action-header">
                            <i class="fas fa-filter"></i>
                            <h3>Filtrar Productos</h3>
                        </div>
                        <p>Filtra los productos mostrados por diferentes criterios.</p>
                        <div class="action-features">
                            <i class="fas fa-check"></i> Todos los productos
                            <i class="fas fa-check"></i> Solo actualizados
                            <i class="fas fa-check"></i> Solo nuevos
                            <i class="fas fa-check"></i> Con errores
                        </div>
                    </div>
                </div>
            </section>

            <!-- Soluci√≥n de Problemas -->
            <section id="solucion-problemas" class="manual-section">
                <h2><i class="fas fa-tools"></i> Soluci√≥n de Problemas</h2>

                <div class="troubleshooting-section">
                    <h3><i class="fas fa-exclamation-triangle"></i> Problemas Comunes</h3>
                    
                    <div class="problem-grid">
                        <div class="problem-card">
                            <h4><i class="fas fa-power-off"></i> La Detecci√≥n No Se Activa</h4>
                            <p><strong>S√≠ntomas:</strong> El toggle no responde o el sistema no inicia</p>
                            <div class="solutions">
                                <strong>Soluciones:</strong>
                                <ol>
                                    <li>Verificar que la API de Verial est√© accesible</li>
                                    <li>Comprobar los permisos de WordPress (manage_options)</li>
                                    <li>Revisar los logs del sistema para errores</li>
                                    <li>Limpiar cach√© del plugin</li>
                                    <li>Verificar que WooCommerce est√© activo</li>
                                </ol>
                            </div>
                        </div>

                        <div class="problem-card">
                            <h4><i class="fas fa-times-circle"></i> Errores de Sincronizaci√≥n</h4>
                            <p><strong>S√≠ntomas:</strong> Productos no se actualizan o aparecen errores</p>
                            <div class="solutions">
                                <strong>Soluciones:</strong>
                                <ol>
                                    <li>Verificar conexi√≥n con la API de Verial</li>
                                    <li>Comprobar credenciales de API</li>
                                    <li>Revisar logs de errores espec√≠ficos</li>
                                    <li>Verificar que los productos existan en WooCommerce</li>
                                    <li>Aumentar timeout de peticiones</li>
                                </ol>
                            </div>
                        </div>

                        <div class="problem-card">
                            <h4><i class="fas fa-clock"></i> Sincronizaci√≥n Lenta</h4>
                            <p><strong>S√≠ntomas:</strong> El proceso tarda mucho en completar</p>
                            <div class="solutions">
                                <strong>Soluciones:</strong>
                                <ol>
                                    <li>Reducir el l√≠mite de productos por lote</li>
                                    <li>Aumentar el intervalo de detecci√≥n</li>
                                    <li>Optimizar el servidor y aumentar memoria PHP</li>
                                    <li>Verificar que no haya conflictos con otros plugins</li>
                                </ol>
                            </div>
                        </div>

                        <div class="problem-card">
                            <h4><i class="fas fa-memory"></i> Alto Uso de Memoria</h4>
                            <p><strong>S√≠ntomas:</strong> El sistema se queda sin memoria durante la sincronizaci√≥n</p>
                            <div class="solutions">
                                <strong>Soluciones:</strong>
                                <ol>
                                    <li>Reducir el tama√±o del lote de productos</li>
                                    <li>Aumentar el l√≠mite de memoria PHP (memory_limit)</li>
                                    <li>Ajustar el horario de funcionamiento a horas de menor tr√°fico</li>
                                    <li>Revisar plugins que consuman mucha memoria</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="diagnostic-tools">
                    <h3><i class="fas fa-stethoscope"></i> Herramientas de Diagn√≥stico</h3>
                    <div class="diagnostic-grid">
                        <div class="diagnostic-card">
                            <h4><i class="fas fa-file-alt"></i> Logs del Sistema</h4>
                            <p>Revisa los registros de actividad para identificar problemas:</p>
                            <code>wp-content/uploads/logs/mi-integracion-api/</code>
                        </div>
                        <div class="diagnostic-card">
                            <h4><i class="fas fa-network-wired"></i> Estado de la API</h4>
                            <p>Verifica la conectividad con la API de Verial:</p>
                            <code>Dashboard ‚Üí Verial API (debe mostrar üü¢)</code>
                        </div>
                        <div class="diagnostic-card">
                            <h4><i class="fas fa-database"></i> Verificar Base de Datos</h4>
                            <p>Comprueba que los productos se est√°n guardando correctamente:</p>
                            <code>Productos ‚Üí Verificar metadatos de Verial</code>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Footer -->
            <footer class="manual-footer">
                <p><i class="fas fa-info-circle"></i> Este manual est√° actualizado para la versi√≥n 2.0.0 del sistema de Detecci√≥n Autom√°tica.</p>
            </footer>
        </main>
    </div>

    <script>
        // Smooth scrolling for navigation links
        for (const anchor of document.querySelectorAll('a[href^="#"]')) {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        }

        // Highlight current section
        window.addEventListener('scroll', function() {
            const sections = document.querySelectorAll('.manual-section');
            const navLinks = document.querySelectorAll('.nav-list a');
            
            let current = '';
            for (const section of sections) {
                const sectionTop = section.offsetTop;
                if (scrollY >= (sectionTop - 200)) {
                    current = section.getAttribute('id');
                }
            }

            for (const link of navLinks) {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            }
        });
    </script>
</body>
</html>
